Markdown Notes:


Using fifo_rows_redo2.ipynb,    commit at 4:45 b4 checkout older version, branch fifo_redo3a

At end of loop 1:

    All's good with 1050, 1000, and 100
    
    Notes: 
    
        1050: at the end of loop 1:
        
            sales_record:  has 1 record for buy and sell.  1000 / 1000 and 50 cf in sold_pps & sold_basis.  Flag == TRUE
            
            buys /sells - Buys record 1 with 50, record 2 unchanged at 1000. Sells record 1 with 50, record 2 gone, record 3 950 
            
            At end of loop 2:
            
            sale_records:  top record(newest) shows 50 buy / 50 sells, no c/f, TRUE/TRUE, and type = CFCF
            
            buys/sells - buys record 1 gone, correct record 2 on top with 1000, sells record 1 is gone, top record, 2 is 950. Perfect.
            
            
            
        
        1000: at end of loop 1:
        
            sales_record:  buy / sell 1000 / 1000.  No c/f, no flag / true_false
   
             buys / sells - looks good.  Record # 1 & 2 deleted and, 3 & 4 are ready for next loop
             
             At end of loop 2:
             
             sale_records:  new record 1000 / 1000.  No c/f.  NO TRUE.   Perfect
             
             buys/sells - buys/sells both have 2 rows of deleted records.  Now showing correctly:  indexes 5/6
             
             
        100:
        
            sale_records: buy /sell  100 / 100.  900 c/f in sold_pps & sold_basis.  true_false == TRUE, flag == FALSE

            buys/sells - look good.  Buys record 1 gone, Record 2 at top.  Sells, record 1 shows 900, record 2 is 1000.  Good
            
            loop 2
            
            sale_records :  new top row - 900 buy / 900 sells.  100 buys c/f (3 corect values in sold_vars), flag == TRUE, true_false == FALSE. Perfect
            
            buy/sells:  row1: buys 100 TRUE, type: Buy CF, Index 3 //  sells 100 TRUE, Sell CF,  Index 3,
                        row2:  buys, index 5 w/ 1000, good.   /// sells index 4 w 900.  
                        
            

All loops:

There seems to be issue around loop 6.  This likely means there is something about the input data that changed. 
The processing of buy/sell data has a default assumption that the data is arranged as buy/sell.  If the input data
changes from buy/sell, it most likely breaks the successful processing.  

Potential Solution:

Review the input data for any change(s), not the index/row number(s), then stop the if(i = xxx at that / those rows.

Know: The way I arranged the input data was not the same as shown on the Etrade year end, 1099.   I arranged buy/sell
so long as there was enough buys to cover the next sell.  T/F, in row 12 of the input data there are a series of buys
from row 12 to row 16 with a combined sum of 7800.  These 7800 are enought to exceed the next sell of 6000.

Then there is a std buy/sell transaction.

Then there are a series of 3 sells, followed by 2 buys,  things continue being not in buy/sell format from row 24 onward.

Note:  These big changes starting at row 12 will almost certainly require reviewing other methods cost basis beside FIFO.



Exploring the data:  

sale_record - loops 1-6 look okay.  But in loop 7, the buy$quan and sell$quan are not looking right.  There s/b 50 / 50 in row
            7, but for some reason, the 50 was added to the next values of buy and sell